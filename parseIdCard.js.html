<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>parseIdCard.js - util-helpers </title>
    
    <meta name="description" content="一个基于业务场景的工具方法库" />
    
        <meta name="keywords" content="util, business-util, business-helpers, util-helpers" />
        <meta name="keyword" content="util, business-util, business-helpers, util-helpers" />
    
    
    
    <meta property="og:title" content="util-helpers"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content="util-helpers"/>
    <meta property="og:url" content="https://doly-dev.github.io/util-helpers/index.html"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/doly-dev/util-helpers" target="_blank" class="menu-item" id="repo_link" >Github repo</a></h2><h2><a href="https://github.com/doly-dev/util-helpers/releases" target="_blank" class="menu-item" id="repo_link" >Change log</a></h2><h3>Modules</h3><ul><li><a href="module-Math.html">Math</a><ul class='methods'><li data-type='method'><a href="module-Math.html#.divide">divide</a></li><li data-type='method'><a href="module-Math.html#.minus">minus</a></li><li data-type='method'><a href="module-Math.html#.plus">plus</a></li><li data-type='method'><a href="module-Math.html#.round">round</a></li><li data-type='method'><a href="module-Math.html#.times">times</a></li></ul></li><li><a href="module-Processor.html">Processor</a><ul class='methods'><li data-type='method'><a href="module-Processor.html#.bytesToSize">bytesToSize</a></li><li data-type='method'><a href="module-Processor.html#.formatBankCard">formatBankCard</a></li><li data-type='method'><a href="module-Processor.html#.formatMoney">formatMoney</a></li><li data-type='method'><a href="module-Processor.html#.numberToChinese">numberToChinese</a></li><li data-type='method'><a href="module-Processor.html#.parseIdCard">parseIdCard</a></li><li data-type='method'><a href="module-Processor.html#.replaceChar">replaceChar</a></li></ul></li><li><a href="module-Validator.html">Validator</a><ul class='methods'><li data-type='method'><a href="module-Validator.html#.isBankCard">isBankCard</a></li><li data-type='method'><a href="module-Validator.html#.isBusinessLicense">isBusinessLicense</a></li><li data-type='method'><a href="module-Validator.html#.isChinese">isChinese</a></li><li data-type='method'><a href="module-Validator.html#.isEmail">isEmail</a></li><li data-type='method'><a href="module-Validator.html#.isHMCard">isHMCard</a></li><li data-type='method'><a href="module-Validator.html#.isIdCard">isIdCard</a></li><li data-type='method'><a href="module-Validator.html#.isIPv4">isIPv4</a></li><li data-type='method'><a href="module-Validator.html#.isIPv6">isIPv6</a></li><li data-type='method'><a href="module-Validator.html#.isMobile">isMobile</a></li><li data-type='method'><a href="module-Validator.html#.isPassport">isPassport</a></li><li data-type='method'><a href="module-Validator.html#.isPassword">isPassword</a></li><li data-type='method'><a href="module-Validator.html#.isPostcode">isPostcode</a></li><li data-type='method'><a href="module-Validator.html#.isPromiseLike">isPromiseLike</a></li><li data-type='method'><a href="module-Validator.html#.isQQ">isQQ</a></li><li data-type='method'><a href="module-Validator.html#.isSocialCreditCode">isSocialCreditCode</a></li><li data-type='method'><a href="module-Validator.html#.isTelephone">isTelephone</a></li><li data-type='method'><a href="module-Validator.html#.isTWCard">isTWCard</a></li><li data-type='method'><a href="module-Validator.html#.isUrl">isUrl</a></li><li data-type='method'><a href="module-Validator.html#.isVehicle">isVehicle</a></li><li data-type='method'><a href="module-Validator.html#.isWX">isWX</a></li><li data-type='method'><a href="module-Validator.html#.validatePassword">validatePassword</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">parseIdCard.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import isIdCard from './isIdCard';

const regIdCard = /^(?&lt;province>\d{2})(?&lt;city>\d{2})(?&lt;area>\d{2})(?&lt;year>(?:\d{2})?\d{2})(?&lt;month>\d{2})(?&lt;day>\d{2})\d{2}(?&lt;gender>\d)(?:\d|X)?$/i;

const Provinces = [
  // 华北地区：北京市|110000，天津市|120000，河北省|130000，山西省|140000，内蒙古自治区|150000
  ['11', '北京市'],
  ['12', '天津市'],
  ['13', '河北省'],
  ['14', '山西省'],
  ['15', '内蒙古自治区'],

  // 东北地区： 辽宁省|210000，吉林省|220000，黑龙江省|230000
  ['21', '辽宁省'],
  ['22', '吉林省'],
  ['23', '黑龙江省'],

  // 华东地区： 上海市|310000，江苏省|320000，浙江省|330000，安徽省|340000，福建省|350000，江西省|360000，山东省|370000
  ['31', '上海市'],
  ['32', '江苏省'],
  ['33', '浙江省'],
  ['34', '安徽省'],
  ['35', '福建省'],
  ['36', '江西省'],
  ['37', '山东省'],

  // 华中地区： 河南省|410000，湖北省|420000，湖南省|430000
  ['41', '河南省'],
  ['42', '湖北省'],
  ['43', '湖南省'],

  // 华南地区：广东省|440000，广西壮族自治区|450000，海南省|460000
  ['44', '广东省'],
  ['45', '广西壮族自治区'],
  ['46', '海南省'],

  // 西南地区：重庆市|500000，四川省|510000，贵州省|520000，云南省|530000，西藏自治区|540000
  ['50', '重庆市'],
  ['51', '四川省'],
  ['52', '贵州省'],
  ['53', '云南省'],
  ['54', '西藏自治区'],

  // 西北地区： 陕西省|610000，甘肃省|620000，青海省|630000，宁夏回族自治区|640000，新疆维吾尔自治区|650000
  ['61', '陕西省'],
  ['62', '甘肃省'],
  ['63', '青海省'],
  ['64', '宁夏回族自治区'],
  ['65', '新疆维吾尔自治区'],

  // 台湾地区：台湾省|710000
  // 台湾居民公民身份号码地址码为830000，参考 http://www.wanweibaike.com/wiki-中华人民共和国行政区划代码_(7区)、https://zh.wikipedia.org/wiki/港澳台居民居住证
  ['71', '台湾省'],
  ['83', '台湾省'],

  // 港澳地区：香港特别行政区|810000，澳门特别行政区|820000
  ['81', '香港特别行政区'],
  ['82', '澳门特别行政区'],
];

// 第一位数字是以前的大区制代码。第二位是大区所在省市编码。全国共分为8个大区：华北（1）、东北（2）、华东（3）、中南（4）、西南（5）、西北（6）、台湾（7）和港澳（8）。
// const Regions = [
//   ['1', '华北地区'],
//   ['2', '东北地区'],
//   ['3', '华东地区'],
//   ['4', '中南地区'],
//   ['5', '西南地区'],
//   ['6', '西北地区'],
//   ['7', '台湾地区'],
//   ['8', '港澳地区']
// ];

/**
 * 解析身份证号码，支持15、18位身份证号码
 * 
 * @static
 * @alias module:Processor.parseIdCard
 * @since 4.0.0
 * @see 参考 {@link https://baike.baidu.com/item/居民身份证号码|居民身份证号码}
 * @param {string} id 身份证号码，支持15位
 * @returns {null | Object} 省份、生日、性别，省/市/区/年/月/日/性别编码
 * @example
 * parseIdCard('123456789123456');
 * // => null
 * 
 * // 18位身份证号码
 * parseIdCard('130701199310302288')
 * // =>
 * {
  birthday: "1993-10-30",
  gender: "女",
  origin: { province: "13", city: "07", area: "01", year: "1993", month: "10", day: "30", gender: "8" },
  province: "河北省"
}
 * // 15位身份证号码
 * parseIdCard('130701931030228');
 * // =>
 * {
  birthday: "93-10-30",
  gender: "女",
  origin: { province: "13", city: "07", area: "01", year: "93", month: "10", day: "30", gender: "8" },
  province: "河北省"
}
 * 
 */
function parseIdCard(id) {
  if (!isIdCard(id, { loose: true })) {
    return null;
  }

  const info = regIdCard.exec(id);

  if (!info) {
    return null;
  }

  /** 
   * @type {{ province: string, city: string, area: string, year: string, month: string, day: string, gender: string }} 
   * 
  */
  let origin = {
    province: '',
    city: '',
    area: '',
    year: '',
    month: '',
    day: '',
    gender: ''
  };

  if (info.groups) {
    // @ts-ignore
    origin = info.groups;
  } else {
    const [_, province, city, area, year, month, day, gender] = info;
    origin = { province, city, area, year, month, day, gender }
  }

  const province = Provinces.find(item => item[0] === origin.province);

  if (!province) {
    return null;
  }

  const birthday = `${origin.year}-${origin.month}-${origin.day}`;
  const gender = Number(origin.gender) % 2 === 0 ? '女' : '男';
  // const region = Regions.find(item => item[0] === origin.province?.substr(0, 1));

  return {
    // region,
    province: province[1],
    birthday,
    gender,
    origin
  }
}

export default parseIdCard;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Tue Jun 15 2021 09:26:07 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
